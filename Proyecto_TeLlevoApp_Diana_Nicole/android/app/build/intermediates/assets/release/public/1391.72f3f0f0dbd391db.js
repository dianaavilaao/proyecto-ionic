"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1391],{1391:(x,m,s)=>{s.r(m),s.d(m,{OfferServicesPageModule:()=>V});var p=s(177),d=s(4341),r=s(791),_=s(70),u=s(467),g=s(2450);class h{constructor(c,o,n,i,a,l){this.pasajeros=[],this.enCurso=!1,this.id=c,this.conductor=o,this.vehiculo=n,this.sede=i,this.minutosAnuncio=a,this.distanciaMaxima=l}}var e=s(3953),f=s(3656),v=s(3067);function F(t,c){if(1&t){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){e.eBV(o);const i=e.XpG(2);return e.Njj(i.cancelEdit())}),e.EFF(4,"Cancelar"),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"Editar veh\xedculo"),e.k0s()()(),e.j41(7,"ion-content",3)(8,"form",35),e.bIt("ngSubmit",function(){e.eBV(o);const i=e.XpG(2);return e.Njj(i.confirmEditModal())}),e.j41(9,"ion-item")(10,"ion-label",31),e.EFF(11,"Marca"),e.k0s(),e.j41(12,"ion-input",36),e.mxI("ngModelChange",function(i){e.eBV(o);const a=e.XpG(2);return e.DH7(a.editingVehicle.marca,i)||(a.editingVehicle.marca=i),e.Njj(i)}),e.k0s()(),e.j41(13,"ion-item")(14,"ion-label",31),e.EFF(15,"Modelo"),e.k0s(),e.j41(16,"ion-input",37),e.mxI("ngModelChange",function(i){e.eBV(o);const a=e.XpG(2);return e.DH7(a.editingVehicle.modelo,i)||(a.editingVehicle.modelo=i),e.Njj(i)}),e.k0s()(),e.j41(17,"ion-item")(18,"ion-label",31),e.EFF(19,"Patente"),e.k0s(),e.j41(20,"ion-input",38),e.mxI("ngModelChange",function(i){e.eBV(o);const a=e.XpG(2);return e.DH7(a.editingVehicle.patente,i)||(a.editingVehicle.patente=i),e.Njj(i)}),e.k0s()(),e.j41(21,"ion-item")(22,"ion-label",31),e.EFF(23,"Color"),e.k0s(),e.j41(24,"ion-input",39),e.mxI("ngModelChange",function(i){e.eBV(o);const a=e.XpG(2);return e.DH7(a.editingVehicle.color,i)||(a.editingVehicle.color=i),e.Njj(i)}),e.k0s()(),e.j41(25,"ion-item")(26,"ion-label",31),e.EFF(27,"Capacidad m\xe1xima"),e.k0s(),e.j41(28,"ion-input",40),e.mxI("ngModelChange",function(i){e.eBV(o);const a=e.XpG(2);return e.DH7(a.editingVehicle.capacidadMaxima,i)||(a.editingVehicle.capacidadMaxima=i),e.Njj(i)}),e.k0s()(),e.j41(29,"ion-button",4),e.bIt("click",function(){e.eBV(o);const i=e.XpG(2);return e.Njj(i.confirmarEdicion())}),e.EFF(30,"Guardar cambios"),e.k0s()()()}if(2&t){const o=e.XpG(2);e.R7$(12),e.R50("ngModel",o.editingVehicle.marca),e.R7$(4),e.R50("ngModel",o.editingVehicle.modelo),e.R7$(4),e.R50("ngModel",o.editingVehicle.patente),e.R7$(4),e.R50("ngModel",o.editingVehicle.color),e.R7$(4),e.R50("ngModel",o.editingVehicle.capacidadMaxima)}}function j(t,c){if(1&t&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Veh\xedculo registrado"),e.k0s()(),e.j41(4,"ion-card-content")(5,"ion-item")(6,"ion-label"),e.EFF(7,"Marca:"),e.k0s(),e.j41(8,"ion-text"),e.EFF(9),e.k0s()(),e.j41(10,"ion-item")(11,"ion-label"),e.EFF(12,"Modelo:"),e.k0s(),e.j41(13,"ion-text"),e.EFF(14),e.k0s()(),e.j41(15,"ion-item")(16,"ion-label"),e.EFF(17,"Patente:"),e.k0s(),e.j41(18,"ion-text"),e.EFF(19),e.k0s()(),e.j41(20,"ion-item")(21,"ion-label"),e.EFF(22,"Color:"),e.k0s(),e.j41(23,"ion-text"),e.EFF(24),e.k0s()(),e.j41(25,"ion-item")(26,"ion-label"),e.EFF(27,"Capacidad:"),e.k0s(),e.j41(28,"ion-text"),e.EFF(29),e.k0s()()(),e.j41(30,"ion-button",33),e.EFF(31,"Editar veh\xedculo"),e.k0s(),e.j41(32,"ion-modal",34),e.DNE(33,F,31,5,"ng-template"),e.k0s()()),2&t){const o=e.XpG();e.R7$(9),e.JRh(o.vehiculo.marca),e.R7$(5),e.JRh(o.vehiculo.modelo),e.R7$(5),e.JRh(o.vehiculo.patente),e.R7$(5),e.JRh(o.vehiculo.color),e.R7$(5),e.JRh(o.vehiculo.capacidadMaxima)}}function M(t,c){if(1&t){const o=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){e.eBV(o);const i=e.XpG(2);return e.Njj(i.cancel())}),e.EFF(4,"Cancelar"),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"Formulario veh\xedculo"),e.k0s()()(),e.j41(7,"ion-content",3)(8,"form",35),e.bIt("ngSubmit",function(){e.eBV(o);const i=e.XpG(2);return e.Njj(i.confirm())}),e.j41(9,"ion-item")(10,"ion-label",31),e.EFF(11,"Marca"),e.k0s(),e.j41(12,"ion-input",36),e.mxI("ngModelChange",function(i){e.eBV(o);const a=e.XpG(2);return e.DH7(a.nuevoVehiculo.marca,i)||(a.nuevoVehiculo.marca=i),e.Njj(i)}),e.k0s()(),e.j41(13,"ion-item")(14,"ion-label",31),e.EFF(15,"Modelo"),e.k0s(),e.j41(16,"ion-input",37),e.mxI("ngModelChange",function(i){e.eBV(o);const a=e.XpG(2);return e.DH7(a.nuevoVehiculo.modelo,i)||(a.nuevoVehiculo.modelo=i),e.Njj(i)}),e.k0s()(),e.j41(17,"ion-item")(18,"ion-label",31),e.EFF(19,"Patente"),e.k0s(),e.j41(20,"ion-input",38),e.mxI("ngModelChange",function(i){e.eBV(o);const a=e.XpG(2);return e.DH7(a.nuevoVehiculo.patente,i)||(a.nuevoVehiculo.patente=i),e.Njj(i)}),e.k0s()(),e.j41(21,"ion-item")(22,"ion-label",31),e.EFF(23,"Color"),e.k0s(),e.j41(24,"ion-input",39),e.mxI("ngModelChange",function(i){e.eBV(o);const a=e.XpG(2);return e.DH7(a.nuevoVehiculo.color,i)||(a.nuevoVehiculo.color=i),e.Njj(i)}),e.k0s()(),e.j41(25,"ion-item")(26,"ion-label",31),e.EFF(27,"Capacidad m\xe1xima"),e.k0s(),e.j41(28,"ion-input",43),e.mxI("ngModelChange",function(i){e.eBV(o);const a=e.XpG(2);return e.DH7(a.nuevoVehiculo.capacidadMaxima,i)||(a.nuevoVehiculo.capacidadMaxima=i),e.Njj(i)}),e.k0s()(),e.j41(29,"ion-button",44),e.EFF(30,"Agregar veh\xedculo"),e.k0s()()()}if(2&t){const o=e.XpG(2);e.R7$(12),e.R50("ngModel",o.nuevoVehiculo.marca),e.R7$(4),e.R50("ngModel",o.nuevoVehiculo.modelo),e.R7$(4),e.R50("ngModel",o.nuevoVehiculo.patente),e.R7$(4),e.R50("ngModel",o.nuevoVehiculo.color),e.R7$(4),e.R50("ngModel",o.nuevoVehiculo.capacidadMaxima)}}function E(t,c){1&t&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"No tienes un veh\xedculo registrado"),e.k0s()(),e.j41(4,"ion-card-content")(5,"p"),e.EFF(6,"Por favor, registra tu veh\xedculo para verlo aqu\xed y ofrecer viajes."),e.k0s()(),e.j41(7,"ion-button",41),e.EFF(8,"Agregar vehiculo"),e.k0s(),e.j41(9,"ion-modal",42),e.DNE(10,M,31,5,"ng-template"),e.k0s()())}const S=[{path:"",component:(()=>{var t;class c{constructor(n,i,a,l,b,C){this.navController=n,this.loginService=i,this.modalController=a,this.toastController=l,this.router=b,this.alertController=C,this.usuario=null,this.vehiculo=null,this.selectedValue=5,this.sedeSeleccionada="",this.distanciaMaxima=0,this.editingVehicle=new g.o("","","","",4,0),this.nuevoVehiculo=new g.o("","","","",4,0)}ngOnInit(){var n=this;return(0,u.A)(function*(){n.usuario=yield n.loginService.obtenerUsuarioAutenticado(),n.usuario&&(n.vehiculo=yield n.loginService.obtenerVehiculoUsuario(n.usuario.usuario))})()}volver(){this.navController.back()}cancel(){return this.nuevoVehiculo=new g.o("","","","",4,0),this.modalController.dismiss(null,"cancel")}confirm(){var n=this;return(0,u.A)(function*(){if(n.usuario){const i=new g.o(n.nuevoVehiculo.marca,n.nuevoVehiculo.modelo,n.nuevoVehiculo.patente,n.nuevoVehiculo.color,n.nuevoVehiculo.capacidadMaxima,0);yield n.loginService.guardarVehiculo(n.usuario.usuario,i),n.vehiculo=i,n.nuevoVehiculo=new g.o("","","","",0,0),yield n.modalController.dismiss(i,"confirm"),yield n.ngOnInit()}})()}cancelEdit(){this.modal.dismiss(null,"cancel"),this.navController.navigateBack("/offer-services")}dismissEditModal(){this.modal.dismiss(null,"cancel"),this.navController.navigateBack("/offer-services")}confirmEditModal(){var n=this;return(0,u.A)(function*(){n.usuario&&n.editingVehicle&&(yield n.loginService.editarVehiculo(n.usuario.usuario,n.editingVehicle),n.vehiculo=n.editingVehicle,n.dismissEditModal(),yield n.ngOnInit())})()}agregarVehiculo(n){var i=this;return(0,u.A)(function*(){i.usuario&&(yield i.loginService.guardarVehiculo(i.usuario.usuario,n),i.vehiculo=n,i.cancel(),yield i.ngOnInit())})()}editarVehiculo(n){var i=this;return(0,u.A)(function*(){i.usuario&&(yield i.loginService.guardarVehiculo(i.usuario.usuario,n),i.vehiculo=n,i.cancelEdit(),yield i.ngOnInit())})()}crearServicio(){var n=this;return(0,u.A)(function*(){if(n.usuario&&n.vehiculo)try{const i=new h(Date.now(),n.usuario,n.vehiculo,n.sedeSeleccionada,n.selectedValue,n.distanciaMaxima);yield n.loginService.guardarServicio(i),n.mostrarToast("Servicio creado, ahora tu publicaci\xf3n es visible","success")}catch(i){n.mostrarToast("Error al crear el servicio","danger"),console.error("Error al crear el servicio:",i)}else n.mostrarToast("Debe estar autenticado y tener un veh\xedculo registrado","danger")})()}mostrarToast(n,i){var a=this;return(0,u.A)(function*(){(yield a.toastController.create({message:n,duration:3e3,position:"bottom",color:i})).present()})()}goToServiceStatus(){this.router.navigate(["/service-status"])}confirmarEdicion(){var n=this;return(0,u.A)(function*(){yield(yield n.alertController.create({header:"Confirmar edici\xf3n",message:"\xbfEst\xe1s seguro de que deseas guardar los cambios en el veh\xedculo?",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Edici\xf3n cancelada")}},{text:"Guardar",handler:()=>{n.confirmEditModal()}}]})).present()})()}}return(t=c).\u0275fac=function(n){return new(n||t)(e.rXU(f.q9),e.rXU(v.H),e.rXU(r.W3),e.rXU(r.K_),e.rXU(_.Ix),e.rXU(r.hG))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-offer-services"]],viewQuery:function(n,i){if(1&n&&e.GBs(r.Sb,5),2&n){let a;e.mGM(a=e.lsd())&&(i.modal=a.first)}},decls:78,vars:6,consts:[["slot","start"],[3,"click"],["name","arrow-back-outline"],[1,"ion-padding"],["expand","block",3,"click"],[4,"ngIf"],[2,"width","100%","flex-direction","column"],[2,"display","flex","align-items","center","margin-bottom","5px"],["min","5","max","60","step","5",2,"flex","1",3,"ngModelChange","ngModel"],["slot","end"],["placeholder","Seleccione una sede",3,"ngModelChange","ngModel"],["value","alameda"],["value","padre-alonso"],["value","antonio-varas"],["value","educacion-continua"],["value","maipu"],["value","melipilla"],["value","plaza-norte"],["value","plaza-oeste"],["value","vespucio"],["value","puente-alto"],["value","san-bernardo"],["value","san-carlos"],["value","san-joaquin"],["value","valparaiso"],["value","vina-del-mar"],["value","arauco"],["value","nacimiento"],["value","san-andres"],["value","villarrica"],["value","puerto-montt"],["position","floating"],["type","number","placeholder","Ej: 5",3,"ngModelChange","ngModel"],["id","open-edit-vehicle-modal","expand","block"],["trigger","open-edit-vehicle-modal"],[3,"ngSubmit"],["type","text","name","marca","required","",3,"ngModelChange","ngModel"],["type","text","name","modelo","required","",3,"ngModelChange","ngModel"],["type","text","name","patente","required","",3,"ngModelChange","ngModel"],["type","text","name","color","required","",3,"ngModelChange","ngModel"],["type","number","name","capacidadMaxima","required","",3,"ngModelChange","ngModel"],["id","open-modal","expand","block"],["trigger","open-modal"],["type","number","name","capacidadMaxima","required","","min","1","placeholder","Ej: 4",3,"ngModelChange","ngModel"],["expand","block","type","submit"]],template:function(n,i){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return i.volver()}),e.nrm(4,"ion-icon",2),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"Ofrece transporte"),e.k0s()()(),e.j41(7,"ion-content",3)(8,"ion-button",4),e.bIt("click",function(){return i.goToServiceStatus()}),e.EFF(9,"Revisar estado de servicios"),e.k0s(),e.DNE(10,j,34,5,"ion-card",5)(11,E,11,0,"ion-card",5),e.j41(12,"ion-card")(13,"ion-card-header")(14,"ion-card-title"),e.EFF(15,"Detalles del servicio"),e.k0s()(),e.j41(16,"ion-item")(17,"div",6)(18,"div",7)(19,"div"),e.EFF(20,"Minutos del anuncio:"),e.k0s(),e.j41(21,"div"),e.EFF(22),e.k0s()(),e.j41(23,"ion-range",8),e.mxI("ngModelChange",function(l){return e.DH7(i.selectedValue,l)||(i.selectedValue=l),l}),e.j41(24,"ion-label",0),e.EFF(25,"5"),e.k0s(),e.j41(26,"ion-label",9),e.EFF(27,"60"),e.k0s()()()(),e.j41(28,"ion-item")(29,"ion-label"),e.EFF(30,"Selecciona una sede"),e.k0s(),e.j41(31,"ion-select",10),e.mxI("ngModelChange",function(l){return e.DH7(i.sedeSeleccionada,l)||(i.sedeSeleccionada=l),l}),e.j41(32,"ion-select-option",11),e.EFF(33,"Sede Alameda"),e.k0s(),e.j41(34,"ion-select-option",12),e.EFF(35,"Sede Padre Alonso de Ovalle"),e.k0s(),e.j41(36,"ion-select-option",13),e.EFF(37,"Sede Antonio Varas"),e.k0s(),e.j41(38,"ion-select-option",14),e.EFF(39,"Sede Educaci\xf3n Continua"),e.k0s(),e.j41(40,"ion-select-option",15),e.EFF(41,"Sede Maip\xfa"),e.k0s(),e.j41(42,"ion-select-option",16),e.EFF(43,"Sede Melipilla"),e.k0s(),e.j41(44,"ion-select-option",17),e.EFF(45,"Sede Plaza Norte"),e.k0s(),e.j41(46,"ion-select-option",18),e.EFF(47,"Sede Plaza Oeste"),e.k0s(),e.j41(48,"ion-select-option",19),e.EFF(49,"Sede Vespucio"),e.k0s(),e.j41(50,"ion-select-option",20),e.EFF(51,"Sede Puente Alto"),e.k0s(),e.j41(52,"ion-select-option",21),e.EFF(53,"Sede San Bernardo"),e.k0s(),e.j41(54,"ion-select-option",22),e.EFF(55,"Sede San Carlos de Apoquindo"),e.k0s(),e.j41(56,"ion-select-option",23),e.EFF(57,"Sede San Joaqu\xedn"),e.k0s(),e.j41(58,"ion-select-option",24),e.EFF(59,"Sede Valpara\xedso"),e.k0s(),e.j41(60,"ion-select-option",25),e.EFF(61,"Sede Vi\xf1a del Mar"),e.k0s(),e.j41(62,"ion-select-option",26),e.EFF(63,"Campus Arauco"),e.k0s(),e.j41(64,"ion-select-option",27),e.EFF(65,"Campus Nacimiento"),e.k0s(),e.j41(66,"ion-select-option",28),e.EFF(67,"Sede San Andr\xe9s de Concepci\xf3n"),e.k0s(),e.j41(68,"ion-select-option",29),e.EFF(69,"Campus Villarrica"),e.k0s(),e.j41(70,"ion-select-option",30),e.EFF(71,"Sede Puerto Montt"),e.k0s()()(),e.j41(72,"ion-item")(73,"ion-label",31),e.EFF(74,"Distancia m\xe1xima en km"),e.k0s(),e.j41(75,"ion-input",32),e.mxI("ngModelChange",function(l){return e.DH7(i.distanciaMaxima,l)||(i.distanciaMaxima=l),l}),e.k0s()(),e.j41(76,"ion-button",4),e.bIt("click",function(){return i.crearServicio()}),e.EFF(77,"Aceptar"),e.k0s()()()),2&n&&(e.R7$(10),e.Y8G("ngIf",i.vehiculo),e.R7$(),e.Y8G("ngIf",!i.vehiculo),e.R7$(11),e.JRh(i.selectedValue),e.R7$(),e.R50("ngModel",i.selectedValue),e.R7$(8),e.R50("ngModel",i.sedeSeleccionada),e.R7$(44),e.R50("ngModel",i.distanciaMaxima))},dependencies:[p.bT,d.qT,d.BC,d.cb,d.YS,d.vS,d.cV,r.Jm,r.QW,r.b_,r.I9,r.ME,r.tN,r.W9,r.eU,r.iq,r.$w,r.uz,r.he,r.Ob,r.Nm,r.Ip,r.IO,r.BC,r.ai,r.Sb,r.su,r.Je,r.Gw,r.T6]}),c})()}];let k=(()=>{var t;class c{}return(t=c).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[_.iI.forChild(S),_.iI]}),c})(),V=(()=>{var t;class c{}return(t=c).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.MD,d.YN,r.bv,k]}),c})()}}]);