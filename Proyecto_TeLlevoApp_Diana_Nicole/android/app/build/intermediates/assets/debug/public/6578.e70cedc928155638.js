"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6578],{6578:(b,p,c)=>{c.r(p),c.d(p,{SearchServicesPageModule:()=>f});var d=c(177),u=c(4341),n=c(791),v=c(70),S=c(467),e=c(3953),F=c(3656),m=c(3067);function h(i,s){if(1&i){const t=e.RV6();e.j41(0,"ion-item")(1,"ion-label")(2,"h2"),e.EFF(3),e.k0s(),e.j41(4,"p"),e.EFF(5),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.nI1(10,"number"),e.k0s(),e.j41(11,"p"),e.EFF(12),e.k0s(),e.j41(13,"p"),e.EFF(14),e.k0s()(),e.j41(15,"ion-button",28),e.bIt("click",function(){const o=e.eBV(t).$implicit,r=e.XpG(2);return e.Njj(r.tomarViaje(o))}),e.EFF(16,"Tomar viaje"),e.k0s()()}if(2&i){const t=s.$implicit;e.R7$(3),e.JRh(t.conductor.usuario),e.R7$(2),e.SpI("Sede: ",t.sede,""),e.R7$(2),e.Lme("Veh\xedculo: ",t.vehiculo.marca," ",t.vehiculo.modelo,""),e.R7$(2),e.SpI("Tiempo restante: ",e.i5U(10,7,t.tiempoRestante,"1.0-0")," minutos"),e.R7$(3),e.SpI("Distancia m\xe1xima: ",t.distanciaMaxima," km"),e.R7$(2),e.SpI("Capacidad disponible: ",t.capacidadDisponible,"")}}function g(i,s){if(1&i&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"Conductores disponibles"),e.k0s()(),e.j41(4,"ion-card-content",26)(5,"ion-list"),e.DNE(6,h,17,10,"ion-item",27),e.k0s()()()),2&i){const t=e.XpG();e.R7$(6),e.Y8G("ngForOf",t.serviciosFiltrados)}}function j(i,s){1&i&&(e.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"No hay conductores disponibles"),e.k0s()(),e.j41(4,"ion-card-content")(5,"p"),e.EFF(6,"Actualmente no hay servicios disponibles en la sede seleccionada."),e.k0s()()())}const k=[{path:"",component:(()=>{var i;class s{constructor(a,o){this.navController=a,this.loginService=o,this.servicios=[],this.serviciosFiltrados=[],this.sedeSeleccionada=""}ngOnInit(){var a=this;return(0,S.A)(function*(){a.servicios=yield a.loginService.obtenerServicios(),a.filtrarServicios()})()}volver(){this.navController.back()}filtrarServicios(){const a=Date.now();this.serviciosFiltrados=this.servicios.filter(o=>o.sede===this.sedeSeleccionada).map(o=>{const r=o.minutosAnuncio-(a-o.id)/6e4,M=Math.max((o.vehiculo.capacidadMaxima||0)-(o.vehiculo.asientosOcupados||0),0);return{...o,tiempoRestante:r>0?r:0,capacidadDisponible:M}}).filter(o=>o.tiempoRestante>0),console.log("Servicios filtrados:",this.serviciosFiltrados)}aceptarSede(){this.sedeSeleccionada&&this.filtrarServicios()}tomarViaje(a){this.navController.navigateForward("/selected-service",{queryParams:{servicio:JSON.stringify(a)}})}}return(i=s).\u0275fac=function(a){return new(a||i)(e.rXU(F.q9),e.rXU(m.H))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-search-services"]],decls:60,vars:3,consts:[["slot","start"],[3,"click"],["name","arrow-back-outline"],["placeholder","Selecciona una sede",3,"ngModelChange","ngModel"],["value","alameda"],["value","padre-alonso"],["value","antonio-varas"],["value","educacion-continua"],["value","maipu"],["value","melipilla"],["value","plaza-norte"],["value","plaza-oeste"],["value","vespucio"],["value","puente-alto"],["value","san-bernardo"],["value","san-carlos"],["value","san-joaquin"],["value","valparaiso"],["value","vina-del-mar"],["value","arauco"],["value","nacimiento"],["value","san-andres"],["value","villarrica"],["value","puerto-montt"],["expand","block",3,"click"],[4,"ngIf"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["slot","end",3,"click"]],template:function(a,o){1&a&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0)(3,"ion-button",1),e.bIt("click",function(){return o.volver()}),e.nrm(4,"ion-icon",2),e.k0s()(),e.j41(5,"ion-title"),e.EFF(6,"Busca transporte"),e.k0s()()(),e.j41(7,"ion-content")(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),e.EFF(11,"\xbfEn qu\xe9 sede te encuentras?"),e.k0s()(),e.j41(12,"ion-item")(13,"ion-label"),e.EFF(14,"Sede"),e.k0s(),e.j41(15,"ion-select",3),e.mxI("ngModelChange",function(l){return e.DH7(o.sedeSeleccionada,l)||(o.sedeSeleccionada=l),l}),e.j41(16,"ion-select-option",4),e.EFF(17,"Sede Alameda"),e.k0s(),e.j41(18,"ion-select-option",5),e.EFF(19,"Sede Padre Alonso de Ovalle"),e.k0s(),e.j41(20,"ion-select-option",6),e.EFF(21,"Sede Antonio Varas"),e.k0s(),e.j41(22,"ion-select-option",7),e.EFF(23,"Sede Educaci\xf3n Continua"),e.k0s(),e.j41(24,"ion-select-option",8),e.EFF(25,"Sede Maip\xfa"),e.k0s(),e.j41(26,"ion-select-option",9),e.EFF(27,"Sede Melipilla"),e.k0s(),e.j41(28,"ion-select-option",10),e.EFF(29,"Sede Plaza Norte"),e.k0s(),e.j41(30,"ion-select-option",11),e.EFF(31,"Sede Plaza Oeste"),e.k0s(),e.j41(32,"ion-select-option",12),e.EFF(33,"Sede Vespucio"),e.k0s(),e.j41(34,"ion-select-option",13),e.EFF(35,"Sede Puente Alto"),e.k0s(),e.j41(36,"ion-select-option",14),e.EFF(37,"Sede San Bernardo"),e.k0s(),e.j41(38,"ion-select-option",15),e.EFF(39,"Sede San Carlos de Apoquindo"),e.k0s(),e.j41(40,"ion-select-option",16),e.EFF(41,"Sede San Joaqu\xedn"),e.k0s(),e.j41(42,"ion-select-option",17),e.EFF(43,"Sede Valpara\xedso"),e.k0s(),e.j41(44,"ion-select-option",18),e.EFF(45,"Sede Vi\xf1a del Mar"),e.k0s(),e.j41(46,"ion-select-option",19),e.EFF(47,"Campus Arauco"),e.k0s(),e.j41(48,"ion-select-option",20),e.EFF(49,"Campus Nacimiento"),e.k0s(),e.j41(50,"ion-select-option",21),e.EFF(51,"Sede San Andr\xe9s de Concepci\xf3n"),e.k0s(),e.j41(52,"ion-select-option",22),e.EFF(53,"Campus Villarrica"),e.k0s(),e.j41(54,"ion-select-option",23),e.EFF(55,"Sede Puerto Montt"),e.k0s()()(),e.j41(56,"ion-button",24),e.bIt("click",function(){return o.aceptarSede()}),e.EFF(57,"Buscar"),e.k0s()(),e.DNE(58,g,7,1,"ion-card",25)(59,j,7,0,"ion-card",25),e.k0s()),2&a&&(e.R7$(15),e.R50("ngModel",o.sedeSeleccionada),e.R7$(43),e.Y8G("ngIf",o.serviciosFiltrados.length>0),e.R7$(),e.Y8G("ngIf",0===o.serviciosFiltrados.length))},dependencies:[d.Sq,d.bT,u.BC,u.vS,n.Jm,n.QW,n.b_,n.I9,n.ME,n.tN,n.W9,n.eU,n.iq,n.uz,n.he,n.nf,n.Nm,n.Ip,n.BC,n.ai,n.Je,d.QX]}),s})()}];let E=(()=>{var i;class s{}return(i=s).\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[v.iI.forChild(k),v.iI]}),s})(),f=(()=>{var i;class s{}return(i=s).\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[d.MD,u.YN,n.bv,E]}),s})()}}]);